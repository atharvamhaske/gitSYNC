/*! For license information please see content.js.LICENSE.txt */
(()=>{function e(){var n,r,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function c(e,o,i,a){var c=o&&o.prototype instanceof l?o:l,u=Object.create(c.prototype);return t(u,"_invoke",function(e,t,o){var i,a,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:m,f:m.bind(n,4),d:function(e,t){return i=e,a=0,c=n,f.n=t,s}};function m(e,t){for(a=e,c=t,r=0;!d&&l&&!o&&r<u.length;r++){var o,i=u[r],m=f.p,p=i[2];e>3?(o=p===t)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=n):i[0]<=m&&((o=e<2&&m<i[1])?(a=0,f.v=t,f.n=i[1]):m<p&&(o=e<3||i[0]>t||t>p)&&(i[4]=e,i[5]=t,f.n=p,a=0))}if(o||e>1)return s;throw d=!0,t}return function(o,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,p),a=u,c=p;(r=a<2?n:c)||!d;){i||(a?a<3?(a>1&&(f.n=-1),m(a,c)):f.n=c:f.v=c);try{if(l=2,i){if(a||(o="next"),r=i[o]){if(!(r=r.call(i,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,a<2&&(a=0)}else 1===a&&(r=i.return)&&r.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=n}else if((r=(d=f.n<0)?c:e.call(t,f))!==s)break}catch(e){i=n,a=1,c=e}finally{l=1}}return{value:r,done:d}}}(e,i,a),!0),u}var s={};function l(){}function u(){}function d(){}r=Object.getPrototypeOf;var f=[][i]?r(r([][i]())):(t(r={},i,function(){return this}),r),m=d.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,t(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return u.prototype=d,t(m,"constructor",d),t(d,"constructor",u),u.displayName="GeneratorFunction",t(d,a,"GeneratorFunction"),t(m),t(m,a,"Generator"),t(m,i,function(){return this}),t(m,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:p}})()}function t(e,n,r,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}t=function(e,n,r,o){function a(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?i?i(e,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[n]=r:(a("next",0),a("throw",1),a("return",2))},t(e,n,r,o)}function n(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i={javascript:"js",typescript:"ts",python:"py",python3:"py",java:"java","c++":"cpp",c:"c","c#":"cs",ruby:"rb",swift:"swift",go:"go",golang:"go",scala:"scala",kotlin:"kt",rust:"rs",php:"php",dart:"dart",racket:"rkt",erlang:"erl",elixir:"ex",mysql:"sql",mssql:"sql",oracle:"sql",postgresql:"sql"},a=null,c=!1,s=null;function l(){console.log("GitSync: Content script loaded on LeetCode"),new MutationObserver(function(e){s&&clearTimeout(s),s=setTimeout(function(){u()},1e3)}).observe(document.body,{childList:!0,subtree:!0}),setInterval(u,5e3)}function u(){if(!c)for(var e=0,t=['[data-e2e-locator="submission-result"]','div[class*="success"]','div[class*="accepted"]','span[class*="text-green"]','div[class*="text-green"]'];e<t.length;e++){var n,o=t[e],i=r(document.querySelectorAll(o));try{for(i.s();!(n=i.n()).done;){var a=n.value.textContent.trim().toLowerCase();if("accepted"===a||a.includes("accepted")&&a.length<50)return s&&clearTimeout(s),void(s=setTimeout(function(){c||d()},1e3))}}catch(e){i.e(e)}finally{i.f()}}}function d(){return f.apply(this,arguments)}function f(){var t;return t=e().m(function t(){var n,r,o,i,s,l,u,d,f;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!c){e.n=1;break}return e.a(2);case 1:if(n=y()){e.n=2;break}return console.log("GitSync: Could not extract problem info"),e.a(2);case 2:if(!(!n.name||/^\d+$/.test(n.name)||n.name.length<2)){e.n=4;break}if(console.warn("GitSync: Problem name is invalid:",n.name,"- extracting from URL"),!((r=m())&&r.length>0)){e.n=3;break}n.name=r,console.log("GitSync: Updated problem name from URL:",r),e.n=4;break;case 3:return console.error("GitSync: Could not extract valid problem name, aborting sync"),c=!1,e.a(2);case 4:for(o=0,i=0;i<n.code.length;i++)s=n.code.charCodeAt(i),o=(o<<5)-o+s,o&=o;if(l="".concat(n.name,"-").concat(n.language,"-").concat(Math.abs(o)),a!==l){e.n=5;break}return console.log("GitSync: Duplicate submission detected, skipping sync"),e.a(2);case 5:return e.p=5,e.n=6,new Promise(function(e){chrome.storage.local.get(["syncedSubmissions"],function(t){e(t.syncedSubmissions||{})})});case 6:if(!e.v[l]){e.n=7;break}return console.log("GitSync: Submission already synced (found in storage), skipping"),a=l,e.a(2);case 7:e.n=9;break;case 8:e.p=8,d=e.v,console.log("GitSync: Could not check synced submissions storage:",d);case 9:return e.n=10,p();case 10:if(e.v){e.n=11;break}return console.log("GitSync: Onboarding not complete, skipping sync"),e.a(2);case 11:return console.log("GitSync: Detected accepted submission:",n),c=!0,a=l,e.p=12,e.n=13,new Promise(function(e){chrome.storage.local.get(["syncedSubmissions"],function(t){e(t.syncedSubmissions||{})})});case 13:(u=e.v)[l]=Date.now(),chrome.storage.local.set({syncedSubmissions:u}),e.n=15;break;case 14:e.p=14,f=e.v,console.log("GitSync: Could not store synced submission:",f);case 15:chrome.runtime.sendMessage({type:"SYNC_SOLUTION",problem:n},function(e){var t;setTimeout(function(){c=!1},3e3),e&&e.success?(console.log("GitSync: Successfully synced to GitHub"),g("Solution synced to GitHub!","success")):(console.error("GitSync: Failed to sync:",null==e?void 0:e.error),null!=e&&null!==(t=e.error)&&void 0!==t&&t.includes("does not match")||g("Failed to sync: "+((null==e?void 0:e.error)||"Unknown error"),"error"))});case 16:return e.a(2)}},t,null,[[12,14],[5,8]])}),f=function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function c(e){n(a,o,i,c,s,"next",e)}function s(e){n(a,o,i,c,s,"throw",e)}c(void 0)})},f.apply(this,arguments)}function m(){var e=window.location.pathname.match(/\/problems\/([^\/]+)/);return e?e[1].split("-").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" "):null}function p(){return new Promise(function(e){chrome.storage.local.get(["onboardingComplete"],function(t){e(!0===t.onboardingComplete)})})}function y(){try{var e=function(){for(var e=0,t=['[data-cy="question-title"]','div[class*="question-title"]','h1[class*="title"]','h2[class*="title"]','h3[class*="title"]','h4[class*="title"]','a[href*="/problems/"]','div[class*="title"]','span[class*="title"]'];e<t.length;e++){var n,o=t[e],i=r(document.querySelectorAll(o));try{for(i.s();!(n=i.n()).done;){var a=n.value.textContent.trim();if(a&&!/^\d+$/.test(a)){var c=a.replace(/^\d+\.\s*/,"");if(c=c.replace(/\s+\d+$/,""),!(/^\d+$/.test(c)||c.length<2)&&!c.includes("/")&&!c.includes("http")&&/[a-zA-Z]/.test(c)&&c.length>0&&c.length<100)return console.log("GitSync: Extracted problem name:",c),c}}}catch(e){i.e(e)}finally{i.f()}}var s=window.location.pathname.match(/\/problems\/([^\/]+)/);if(s){var l=s[1].split("-").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" ");return console.log("GitSync: Extracted problem name from URL:",l),l}return console.error("GitSync: Could not extract problem name"),null}(),t=function(){for(var e=0,t=['[class*="difficulty"]','[class*="text-olive"]','[class*="text-yellow"]','[class*="text-pink"]','[class*="text-green"]','[class*="text-orange"]'];e<t.length;e++){var n=t[e],r=document.querySelector(n);if(r){var o=r.textContent.toLowerCase();if(o.includes("easy"))return"Easy";if(o.includes("medium"))return"Medium";if(o.includes("hard"))return"Hard"}}return document.querySelector('[class*="text-olive"], [class*="easy"]')?"Easy":document.querySelector('[class*="text-yellow"], [class*="medium"]')?"Medium":document.querySelector('[class*="text-pink"], [class*="hard"]')?"Hard":"Medium"}(),n=function(){for(var e=0,t=['button[id*="lang"]','[class*="lang-select"]','button[class*="rounded"][class*="flex"]'];e<t.length;e++){var n,o=t[e],a=r(document.querySelectorAll(o));try{for(a.s();!(n=a.n()).done;){var c=n.value.textContent.toLowerCase().trim();if(i[c])return c}}catch(e){a.e(e)}finally{a.f()}}var s=v();if(s){if(s.includes("func ")&&s.includes("package"))return"go";if(s.includes("def ")&&s.includes(":"))return"python3";if(s.includes("public class")||s.includes("class Solution"))return"java";if(s.includes("function")||s.includes("=>"))return"javascript";if(s.includes("fn ")&&s.includes("impl"))return"rust";if(s.includes("#include"))return"c++"}return"javascript"}(),o=v(),a=i[n.toLowerCase()]||n.toLowerCase();return e&&o?{name:e,difficulty:t,language:n,code:o,extension:a}:null}catch(e){return console.error("GitSync: Error extracting problem info:",e),null}}function v(){var e=document.querySelector('[class*="monaco-editor"]');if(e){var t=e.querySelectorAll(".view-line");if(t.length>0)return Array.from(t).map(function(e){return e.textContent}).join("\n")}var n=document.querySelectorAll(".view-lines .view-line");if(n.length>0)return Array.from(n).map(function(e){return e.textContent}).join("\n");var r=document.querySelector(".CodeMirror");if(r&&r.CodeMirror)return r.CodeMirror.getValue();var o=document.querySelector("textarea");return o&&o.value?o.value:""}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=document.getElementById("gitsync-notification");n&&n.remove();var r=document.createElement("div");r.id="gitsync-notification",r.style.cssText="\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    padding: 12px 20px;\n    background: ".concat("success"===t?"#000":"#dc2626",";\n    color: #fff;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    font-size: 14px;\n    border-radius: 4px;\n    z-index: 10000;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    animation: slideIn 0.3s ease;\n  "),r.textContent=e;var o=document.createElement("style");o.textContent="\n    @keyframes slideIn {\n      from { transform: translateX(100%); opacity: 0; }\n      to { transform: translateX(0); opacity: 1; }\n    }\n  ",document.head.appendChild(o),document.body.appendChild(r),setTimeout(function(){r.style.animation="slideIn 0.3s ease reverse",setTimeout(function(){return r.remove()},300)},4e3)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l):l()})();